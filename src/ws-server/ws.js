var WebSocketServer = require('ws').Server,
  wss = new WebSocketServer({port: 40510})


let tracks = [
    {"4ab": {"a": 0, "s": 2, "b": 33.7, "t": "H", "v": 1.19, "y": 0.14, "x": 0.292, "r": 5, "d": 5.71}},
    {"4ab": {"a": 0, "s": 2, "b": 34.18, "t": "H", "v": 1.19, "y": 0.139, "x": 0.295, "r": 5, "d": 5.75}},
    {"4ab": {"a": 0, "s": 2, "b": 35.0, "t": "H", "v": 1.19, "y": 0.138, "x": 0.3, "r": 5, "d": 5.79}},
    {"4ab": {"a": 0, "s": 2, "b": 35.59, "t": "H", "v": 1.19, "y": 0.136, "x": 0.304, "r": 5, "d": 5.83}},
    {"4ab": {"a": 0, "s": 2, "b": 36.07, "t": "H", "v": 1.19, "y": 0.135, "x": 0.306, "r": 5, "d": 5.86}},
    {"4ab": {"a": 0, "s": 2, "b": 36.32, "t": "H", "v": 1.19, "y": 0.133, "x": 0.308, "r": 5, "d": 5.9}},
    {"4ab": {"a": 0, "s": 2, "b": 36.49, "t": "H", "v": 1.18, "y": 0.133, "x": 0.309, "r": 5, "d": 5.94}},
    {"4ab": {"a": 0, "s": 2, "b": 36.57, "t": "H", "v": 1.18, "y": 0.132, "x": 0.309, "r": 5, "d": 5.96}},
    {"4ab": {"a": 0, "s": 2, "b": 35.36, "t": "H", "v": 1.18, "y": 0.132, "x": 0.303, "r": 5, "d": 5.98}},
    {"4ab": {"a": 0, "s": 2, "b": 35.53, "t": "H", "v": 1.17, "y": 0.132, "x": 0.304, "r": 5, "d": 6.0}},
    {"4ab": {"a": 0, "s": 2, "b": 35.58, "t": "H", "v": 1.17, "y": 0.131, "x": 0.304, "r": 5, "d": 6.03}},
    {"4ab": {"a": 0, "s": 2, "b": 36.03, "t": "H", "v": 1.17, "y": 0.131, "x": 0.306, "r": 5, "d": 6.06}}
];


wss.on('connection', function (ws) {
  ws.on('message', function (message) {
    console.log('received: %s', message)
  })

  setInterval(
    () => ws.send(`${new Date()}`),
    1000
  )
})
